version: "3"

services:
  gateway:
    container_name: rss-service-gateway
    build:
      context: ./
      dockerfile: Gateway/Dockerfile

  downloader:
    container_name: rss-service-downloader
    build:
      context: ./
      dockerfile: Downloader/Dockerfile
    depends_on:
      - downloader-db

  downloader-db:
    container_name: rss-service-downloader-db
    image: postgres
    ports:
      - "5432:5432"

  filter:
    container_name: rss-service-filter
    build:
      context: ./
      dockerfile: Filter/Dockerfile
    depends_on:
      - filter-db

  filter-db:
    container_name: rss-service-filter-db
    image: postgres
    ports:
      - "5432:5432"

  sender:
    container_name: rss-service-sender
    build:
      context: ./
      dockerfile: Sender/Dockerfile
    depends_on:
      - sender-db

  sender-db:
    container_name: rss-service-sender-db
    image: postgres
    ports:
      - "5432:5432"

  manager:
    container_name: rss-service-manager
    build:
      context: ./
      dockerfile: Manager/Dockerfile
    depends_on:
      - manager-db

  manager-db:
    container_name: rss-service-manager-db
    image: postgres
    ports:
      - "5432:5432"

  bus:
    container_name: rss-service-bus
    image: rabbitmq
    ports:
      - "15672:15672"
      - "5672:5672"

  email-server:
    container_name: rss-service-email
    image:
